
# Time complexity: O(M*N)
# Space complexity: O(m * n)
class Solution:
    def uniquePathsWithObstacles(self, obstacleGrid: list) -> int:

        m = len(obstacleGrid)
        n = len(obstacleGrid[0])

        print(m,n)
        # 要注意base case
        # [0][0] = 1 -> r = 0
        # then need to deal with the first column and row, still dp
        r = [[1 for i in range(n)] for i in range(m)]

        if m == 0 and n == 0:
            return -1
        if m >0 and n >0:
            if obstacleGrid[0][0] == 1:
                return 0

        for i in range(1,n):
            r[0][i] = min(r[0][i-1], 1-obstacleGrid[0][i])

        for i in range(1,m):
            r[i][0] = min(r[i-1][0], 1-obstacleGrid[i][0])


        print(r)

        # if 1 in obstacleGrid[0][:]:
        #     r[0][:] = [0 for i in range(n)]
        #
        # for i in range(m):
        #     print(i, obstacleGrid[i][0])
        #     if obstacleGrid[i][0] == 1:


        for i in range(1, m):
            for j in range(1, n):
                if obstacleGrid[i][j] == 1:
                    r[i][j] = 0
                else:
                    r[i][j] = r[i - 1][j] + r[i][j - 1]
            print(r)
        return r[m - 1][n - 1]


s = Solution()
obstacleGrid = [[0,0,0,0,0,1,0,1,0,0,0,0,1,0,0,0,0,0],[0,0,0,0,0,0,1,0,0,0,0,1,0,1,0,1,0,0],[1,0,0,0,0,0,1,0,0,0,0,0,1,0,1,1,0,1],[0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0],[0,0,0,0,0,1,0,0,0,0,1,1,0,1,0,0,0,0],[1,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,1,0],[0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0],[0,0,0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,1,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0],[0,0,1,0,1,0,0,0,0,0,0,1,0,0,0,0,0,0],[0,1,0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,0],[0,0,1,0,0,0,0,1,0,0,0,0,0,1,0,0,0,1],[0,1,0,1,0,1,0,0,0,0,0,0,0,1,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1],[1,0,1,1,0,0,0,0,0,0,1,0,1,0,0,0,1,0],[0,0,0,1,0,0,0,0,1,1,1,0,0,1,0,1,1,0],[0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,1,1,0,0,1,0,0,0,0,0,0,0,1,1,0,0,0],[0,0,0,0,0,0,1,0,1,0,0,1,0,1,1,1,0,0],[0,0,0,1,0,0,0,0,0,0,0,0,0,0,1,0,1,1],[0,1,0,0,0,0,0,0,0,0,1,0,1,0,1,0,1,0],[1,0,0,1,0,1,0,0,1,0,0,0,0,0,0,0,0,0],[0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,1,0,0,0,0,0,0,1,1,1,0],[1,0,1,0,1,0,0,0,0,0,0,1,1,0,0,0,0,1],[1,0,0,0,0,0,1,1,0,0,0,1,0,0,0,0,0,0]]
print(s.uniquePathsWithObstacles(obstacleGrid))


# [0,0,0,0,0,1,0,1,0,0,0,0,1,0,0,0,0,0]
# [0,0,0,0,0,0,1,0,0,0,0,1,0,1,0,1,0,0]